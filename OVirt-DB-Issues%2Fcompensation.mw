==  Compensation mechanism ==

=== Long transactions ===

=== Isolation level ===

=== Compensation change log ===

=== What changes are logged ===
  Insertion – the ID of the new entity (compensation = delete entity by Id)
  Deletion – the deleted entity (compensation = re-insertion of the entity)
  Update – the entity before the change (compensation = update entity with “old values”)
  UpdateStatus – the status before change (compensation = update entity with “old status” - this is an optimization)


=== BusinessEntity interface ===

=== BusinessEntitySnapshot ===
  CHANGED_ENTITY – update/delete
  NEW_ENTITY_ID – insert
  CHANGED_STATUS_ONLY – update status 

=== CompensationContext ===
CompensationContext provides the API for adding entries to the “change log” and to flush the “change log” to DB

=== When to compensate? ===
  Exception in execution has occurred
  The status of the transaction is inactive (if code is run in transaction)
  Failure in execution
  Server restart with existing entries at business_entity_snapshot
