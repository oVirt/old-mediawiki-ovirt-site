<!-- {{autolang|base=yes}} -->

== NUMA and Virtual NUMA ==

=== Summary ===
The hypervisorâ€™s default policy is to schedule and run the guest on any available resources on the host. As a result, the resources backing a given guest could end up getting spread out across multiple NUMA nodes and over a period of time may get moved around, leading to poor and unpredictable performance inside the guest.

=== Owner ===

* Name: [[User:JasonLiao| Jason Liao]]
* Email: [mailto:chuan.liao@hp.com chuan.liao@hp.com]

=== Current status ===
* Initialization
* Last updated date: 13 Dec 2013

=== Detailed Description ===
*engine modifications:
**Add three properties on VM define NUMA and Virtual NUMA
**Add one protperty on Host define NUMA node
**Change GUI interface Add/Edit VM dialog with Host tab
[[File:OVirt_large_guest_feature(Dialog).png]]
**Change Frontend VM Module and related operation
**Change Backend VM Module and related operation
*vsdm modifications:
** Change vdsm create process and capabilities with host numa info

[http://www.ovirt.org/images/2/29/OVirt_large_guest_feature.pdf HDesign document]

When this is set the VM should be marked as non-migratable

=== Benefit to oVirt ===
Allows the users to get better performance from their VM's through using all CPU related memory - including the ones not handled by qemu/kvm.
Allows the users to get better performance from their VM's through split virtual NUMA node.

=== Dependencies / Related Features ===
* libvirt's [http://libvirt.org/formatdomain.html#elementsNUMATuning NUMA Node Tuning]
* libvirt's [http://libvirt.org/formatdomain.html#elementsCPU Guest NUMA topology]

=== Documentation / External references ===
* [https://bugzilla.redhat.com/show_bug.cgi?id=1010059 BZ1010059 - NUMA aware and balanced allocation of backing host resources for large guests]
* [https://bugzilla.redhat.com/show_bug.cgi?id=1010079 BZ1010079 - Virtual NUMA nodes inside larger guests]

=== Comments and Discussion ===


[[Category:Feature]]
[[Category:SLA]]
