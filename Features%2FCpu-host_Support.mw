<!-- {{autolang|base=yes}} -->

== CPU-Host Support ==

=== Summary ===
CPU-Host support allows the virtual machines to see and utilize the host's CPU flags, this enables better performance in VM's, at the price of worse portablity.

=== Owner ===

* Name: [[User:Lhornyak| Laszlo Hornyak]]
* Email: <lhornyak@redhatdotcom>

=== Current status ===
* Planning
* Last updated date: 19 Nov 2012


=== Detailed Description ===

Since with host-passthrough gives the host cpu-capabilities to the VM's CPU, migration can not happen to different CPU-models. This could still be acceptable if all the hosts are all uniform in the cluster.

* engine modifications:
** add configuration value AllowMigrateCPUHost (defaults to false)
** modify VmStatic, add useHostCpuFlags boolean property
*** database schema modification in tables, views and stored procedures
*** DAO modifications
** modify the Add/Edit VM dialog, add 'use host cpu flags' checkbox - if AllowMigrateCPUHost is false, then it should be enabled only when Vm is pinned to host
* vdsm modifications:
** add support to domain creation for host-passthrough - api parameter name could be 'useHostCpuFlags'

=== Benefit to oVirt ===
Allows the users to get better performance from their VM's.

=== Dependencies / Related Features ===
* libvirt's [http://libvirt.org/formatdomain.html#elementsCPU CPU-model and topology]

=== Documentation / External references ===
* [https://bugzilla.redhat.com/show_bug.cgi?id=838469 BZ838469 - Support cpu -host for virtual machines]

=== Comments and Discussion ===

[[Category:Feature]]
[[Category:SLA]]
