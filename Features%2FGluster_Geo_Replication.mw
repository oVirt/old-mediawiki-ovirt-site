==Summary==
This feature allows the administrator to configure, start, stop and monitor geo-replication for Gluster volumes from oVirt engine. With this the administrator can view the status of geo-replication on Gluster volumes and also would be able to start/stop/configure geo-replication for a volume. GlusterFS geo-replication provides a continuous, asynchronous, and incremental replication service from one site to another over Local Area Networks (LANs), Wide Area Network (WANs), and across the Internet.

To read more about GlusterFS geo-replication, see http://gluster.org/community/documentation/index.php/Gluster_3.2:_GlusterFS_Geo-replication_Deployment_Overview.

==Owner==
*Feature owner: Shubhendu Tripathi <shtripat@redhat.com>
**GUI Component owner: Kanagaraj Mayilsamy <kmayilsa@redhat.com>
**Engine Component owner: Shubhendu Tripathi <shtripat@redhat.com>
**VDSM Component owner: Balamurugan Arumugam <barumuga@redhat.com>
**QA Owner: Sudhir Dharanendraiah <sdharane@redhat.com>

== Current Status ==

* Status: In Progress
* Last updated date: Thu Jul 25 2013

== Detailed Description ==
GlusterFS Geo-replication uses a Source–Destination model, whereby replication and mirroring occurs between the following partners:
* Source – A GlusterFS volume
* Destination – A GlusterFS Volume in a remote cluster

With this feature the user will be able to
* View all the destinations attached to a cluster
* Add a new destination and enable password less communication between a host of source cluster and a host of destination cluster
* Test password less communication to destination cluster/host
*  Remove(Detach) a destination cluster
* View all active/inactive geo-replication sessions for a volume
* Setup a new ge-replication session
* Start a geo-replication session
* Stop a geo-replication session
* Remove an inactive geo-replication session
* View and update the configuration before starting the session or later (ssh command, gsync command)
* Monitor the status of geo-replication sessions in a cluster

=== Setting up Geo Replication - Functional Work Flow ===

== Design ==

=== User Experience ===

====Listing the Geo-Replication Destinations  ====
A new sub-tab named "Geo-Replication Destinations" will be added to Clusters. All existing geo-replication destinations attached to the cluster will be show for the cluster along with their status. It also provides options for adding/removing destination clusters. 

[[File:Georepdest1list.png]]

==== Add/Attach a new Destination Cluster ====
Password less SSH communication should be enabled between one host of the source cluster and one host of destination cluster before creating a geo-replication session between the identified source and destination clusters. The below dialog "New Geo-Replication Destination" would capture the required details for adding a new destination cluster.

[[File:Georepdest2new.png]]

The user needs to select the '''Fingerprint Verified''' before submitting the details.  This is to make sure the connection is not established with a malicious host.

==== Re-establish password less communication with destination host====
The below dialog provides a mechanism for re-establishing a broken source/destination communication between source and destination clusters. It captures the details again and re-establishes the communication between source and destination cluster.

[[File:geo_replication_slave3_reestablish.png]]

Testing the validity/availability of a destination is possible using the action "Test". Administrator can re-establish a broken source/destination communication as well using the action "Re-establish".

==== Create a  new Geo-Replication Session ====
A new sub tab "Geo-Replication Sessions" will be added to the Volumes main tab in oVirt webadmin UI which will list all the geo-replication sessions for the selected volume.
The below dialog captures the details and creates the geo-replication session between source and destination gluster volumes.

[[File:volume_georeplication1_new.png]]

==== View All Geo-Replication Sessions ====
Geo-Replication Session subtab  also provides actions for 
* Removal of an existing geo-replication session
* Starting a geo-replication session
* Stopping a geo-replication session
* Update configurations for a geo-replication session

[[File:volume_georeplication2_subtab.png]]

==== Start a new Geo-Replication Session ====
A new action named '''Start''' will be shown in the '''Geo-Replication Sessions''' tab

==== Stop a Geo-Replication Session ====
A new action named '''Stop''' will be shown in the '''Geo-Replication Sessions''' tab

==== Remove a Geo-Replication Session ====
A new action named '''Remove''' will be shown in the '''Geo-Replication Sessions''' tab

==== Configurations of Geo-Replication Session ====
The below dialog fetches and lists the default values of all the configurations for a geo-replication session. It provides and option to change the values of the configurations.

[[File:volume_georeplication3_config.png]]


Refer the URL: http://www.ovirt.org/Features/Design/GlusterGeoReplication for detailed design of the feature.

== Dependencies / Related Features and Projects ==

== Test Cases ==

== Documentation / External references ==

http://www.gluster.org/community/documentation/index.php/GlusterFS_Geo_Replication

http://gluster.org/community/documentation/index.php/Gluster_3.2:_Starting_GlusterFS_Geo-replication

== Comments and Discussion ==
http://www.ovirt.org/Talk:Features/Gluster_Geo_Replication

== Open Issues ==

[[Category:Feature]]
