This page was created as a result of a [[http://lists.ovirt.org/pipermail/engine-devel/2013-August/005436.html discussion]] that started at @engine_devel. As we are considering an active/active architecture for Engine, we'll use this page to document required features and code changes that will be required.
== Architecture ==
== Issues with current implementation ==
# Locking. Currently Engine makes extensive use of Java synchronized capabilities to lock multiple requests hitting the same VDSM at the same time. This should be extended to be cross-machine. 
:<sub>However, if we replace HTTP transport protocol (and use push notifications), and since VDSM can support multiple concurrent requests, is the entire locking mechanism still necessary?</sub>
# Singletons. We need to find a mechanism to migrate our singletons to be cross-cluster. 
:<sub>This is a major issue, since if the Engine running the Singleton crashes, we need to migrate the Singleton. The best solution is to probably dump the Singleton approach. We can ride on the CDI [[http://gerrit.ovirt.org/#/c/5575/ change]] and the code-refactor it requires.
# EJB. Again as part of CDI change we should drop EJB.
# State clustering. We can use Infinispan, already integrated in Engine, for state replication.
:<sub>We will need to consider which state needs to be replicated.
# Quartz. DB configuration for Quartz should enable High Availability.
# Database. DB clustering should be out of scope of this task.
