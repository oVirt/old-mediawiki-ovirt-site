== Working with gerrit.ovirt.org ==
Gerrit is a web based code review system, facilitating online code reviews for projects using the Git version control system.
Gerrit makes reviews easier by showing changes in a side-by-side display, and allowing inline comments to be added by any reviewer.
We use Gerrit in the oVirt project in order to review new commits, as it easily enables adding comments, suggestions, ask questions, and etc.
The following sections are a step-by-step manual to set up a Gerrit environment in your development environment.

=== Registering as a user ===
First of all you need to register as a new user to gerrit. You can do that by using any OpenID provider:

* Login page shows Google and Yahoo <BR>
* Any fedora FAS account can login as well via <BR>
https://admin.fedoraproject.org/accounts/openid/id/<username>

=== Set SSH keys in Gerrit settings ===
* On your local machine, create a set of SSH keys (if you don't already have one) via 
 <nowiki>
'ssh-keygen -t rsa'
 </nowiki>
* Update via Gerrit settings the SSH public key to allow SSH to Gerrit

=== Define Gerrit in ~/.ssh/config ===
 <nowiki>
Host gerrit.ovirt.org
   HostName gerrit.ovirt.org
   Port 29418
   User <username>
 </nowiki>

=== Verify configuration ===
In order to verify your SSH configuration, do the following:
 <nowiki>
ssh gerrit.ovirt.org
 </nowiki>
if you get this, it is fine:
 <nowiki>
***    Welcome to Gerrit Code Review    ****
 </nowiki>
=== Cloning the oVirt-engine repository ===
 <nowiki>
git clone gerrit.ovirt.org:ovirt-engine
 </nowiki>

This can also be done without registering to Gerrit, using:
 <nowiki>
git clone git://gerrit.ovirt.org/ovirt-engine
 </nowiki>
=== install the change-ID hook ===
'''You must do this before you commit anything'''<BR>
In order to easily track commit changes in Gerrit, each commit must have a change-ID. This change-ID is added automatically via a Git hook. In order to install this hook do the following:
 <nowiki>
cd ovirt-engine
scp -p gerrit.ovirt.org:hooks/commit-msg .git/hooks/
 </nowiki>

=== Rebase ===
 <nowiki>
git fetch gerrit.ovirt.org:ovirt-engine master
 </nowiki>

=== Push your patch for review ===
 <nowiki>
git push gerrit.ovirt.org:ovirt-engine HEAD:refs/for/master
 </nowiki>

=== Track patch review process ===
The review process is comprised of:
* Anyone can send a patch
* A review in Gerrit can result in:
 - +2 Looks good to me, approved
 - +1 Looks good to me, but someone else must approve
 - 0 No score
 - -1 I would prefer that you didn't submit this
 - -2 Do not submit
* Anyone can code review and comment on the patch and +1/-1. This helps maintainers in reviewing the patches<BR>
* A maintainer can code review it with +2 it, which is required to commit (submit) it<BR>
* Someone (can be anyone) needs to confirm they checked the patch works and flag it as verified +1<BR>
* A maintainer can submit (commit) the patch when it has:<BR>
   Code Review: +2<BR>
   Verified: +1<BR>
* NACK-ed (-1/-2) patches should not be submitted<BR>
* A submitted patch is automatically merged to the git repository<BR>
