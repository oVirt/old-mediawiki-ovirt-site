{{autolang|base=yes}}

<!-- The actual name of your feature page should look something like: Features/YourFeatureName.  This keeps all features in the same namespace -->
= Picketlink Integration =

== Summary ==
<!-- A sentence or two summarizing what this feature is and what it will do.  This information is used for the overall feature summary page for each release. -->
This document describes the new web application SSO infrastructure in the engine core. This infrastructure will enable moving between oVirt web applications, without having to authenticating each one of them separately.

== Owner ==
<!--This should link to your home wiki page so we know who you are-->
* Feature owner: [[User:Ovedo| Oved Ourfali]]
* Email: ovedo@redhat.com

== Motivation ==
There were several key points in the motivation for this project:
* With the upcoming integration between Webadmin and the Reports server, the need to be able to view reports without re-authenticating is crucial.
* 3rd party applications can authenticate using this infrastructure as well, allowing them to perform operations on the different oVirt web applications, without the need to re-authenticate.

== Introduction ==
Currently, the engine uses LDAP domains, and internal admin domain in order to authenticate (when using the API, Webadmin, UP).
When using jasperserver, a whole different infrastructure is used in order to authenticate, as it contains its own set of users.
Nowadays, integration of the Webadmin and the reports server is under-way, thus introducing the need to be able to authenticate to Webadmin, and automatically be able to view reports, without the need to re-authenticate.

=== Basic annotations ===
* SAML - Stands for Security Assertion Markup Language is an XML-based open standard for exchanging authentication and authorization data between security domains, that is, between an identity provider (a producer of assertions) and a service provider (a consumer of assertions). A service provider relies on an identity provider to identify a principal. At the principal's request, the identity provider passes a SAML assertion to the service provider. On the basis of this assertion, the service provider makes an access control decision.
* Picketlink - Picketlink is a Jboss project, providing SAML v2.0 based SSO solution for web applications.
* IDP - Identity provider. The entity which is responsible for identifying a principal trying to connect to the application.
* SP - Service provider. The service itself, which needs to get information on who is the principal already connected to the system.

[[File:Picketlink1.png]]

== Solution Architecture ==
In our solution we have the following players:
* IDP - web application, part of the engine EAR, which is responsible for authenticating and providing information on the logged-in principal, using SAML.
* The engine login module - used to perform the authentication process using the existing engine infrastructure. The IDP uses this login module.
* The SPs - for start, the service providers which will use this infrastructure is the Webadmin, and the reports server.

[[File:Picketlink_img2.png]]

The flow will go as follows:
#The user will try to contact the Webadmin application
#If it is not logged in yet
##Post the request to the IDP, showing a login screen to the user (asking for username, password and domain)
##The user logs in
##The credentials go to the login module, passed to the engine core, and authentication is performed
##If the authentication is succeeded, a session is created in the engine core (as today)
#If it is already logged in
##Get the session ID
##Continue working in the session

Same flow goes for the Reports server.

Now, the user would like to view a report:
#The browser accesses the Reports server
#It is already logged in, so no need to authenticate, and the reports server identifies him as the user logged in (e.g, admin@internal, user1@domain1, etc.)



== Current status ==
* Target Release: 
* Status: Design Stage
* Last updated date: Wed November 10 2011


== Detailed Description ==

=== User Experience ===


== Dependencies / Related Features and Projects ==

Affected oVirt projects:

== Documentation / External references ==

== Comments and Discussion ==

== Future Work ==

== Open Issues ==
[[Category: Feature]]
