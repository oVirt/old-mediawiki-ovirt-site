{{DISPLAYTITLE:oVirt 3.4 Test Day}}

'''This page is still a DRAFT'''


==Objective==
* engage project users and stakeholders to a hands-on experiences with oVirt new release.
* improve the quality of oVirt.
* Introduce and validating new oVirt 3.4 features


==What I should do==

*If you already have the hardware, verify if it meets the hardware requirement, refer information detail section below
* Write down the configuration you used (HW, console, etc) and what you've tested in the [http://etherpad.ovirt.org/p/3.4-testday-1 report etherpad]
*Go ahead and  [[oVirt_3.4_Test_Day#Installation_notes| install ovirt ]]
* Follow the documentation to setup your environment, and test drive the new features.
* Please remember we expect to see some issues, and anything you come up with will save a you when you'll install final release
* Remember to try daily tasks you'd usually do in the engine, to see there are no regressions.
*Accomplish the goals set in objective section ,  run the tests,  update the test matrix.
*Running into any issues?
**  [[Community | Try to get help from the community ]] on #ovirt IRC channel or
**  [https://bugzilla.redhat.com/enter_bug.cgi?product=oVirt open a bugzilla] ticket or
**  Report it on the [http://etherpad.ovirt.org/p/3.4-testday-1 report etherpad]

==Installation notes==

* Make sure you have either a Fedora 19 or CentOS 6.5 machine installed.
* Install the release pkg: 
 (f19) sudo yum localinstall http://resources.ovirt.org/releases/ovirt-release-fedora-10.0.1-2.noarch.rpm
 (el) sudo yum localinstall http://resources.ovirt.org/releases/ovirt-release-el6-10.0.1-2.noarch.rpm
* follow [[OVirt_3.4.0_release_notes#Install_.2F_Upgrade_from_previous_versions | Install instructions in release notes]]

===Known issues===

==oVirt 3.4 New Features==

You can find a list of the new features and a link to features page here: http://bit.ly/17qBn6F

Refer to single feature pages in order to know what and how to test them.

Please report test results on the [http://etherpad.ovirt.org/p/3.4-testday-1 report etherpad]

==Regression testing==

===General===
You need at least two physical servers to install and configure a basic yet complete oVirt environment with shared storage to exercise the following:
{| class="wikitable" border="1"
|-
! Scenario !! Bugs
|-
| Setup oVirt engine using either Active Directory or Local IPA, two hosts configured as hypervisors (Fedora / Ovirt-Node / other) with power management (Storage Domains - Data Domain / ISO Domain and Export Domain) ||
|-
| Setup oVirt engine  -  basic AIO flow || 
|-
| Use ISO Uploader to populate images of OS and tools ||
|-
| Basic Network Configuration ||
|-
| Create virtual machines and assign them to users ||
|-
| Migrate Virtual Machines between the hypervisors ||
|-
| Collect log file using the log collector tool ||
|-
| Upgrade from 3.3 to 3.4 ||  
|-
|}

===Configuration===
{| class="wikitable" border="1"
|-
! Scenario !! Bugs
|-
| Configure high availability for virtual machines which are running mission critical workloads, so they  will be restarted on another host if hardware failure occurs ||
|-
| Use the multi-level administration feature to assign different levels of user permissions ||
|-
| Live Migration Scenarios ||
|-
| Enable smartcard support for a VM and verify that the <smartcard mode="passthrough" type="spicevmc"/> is passed to libvirt ||
|}

===Infra===
{| class="wikitable" border="1"
|-
! Scenario !! Bugs
|-
| Start vdsm-3.4 after fresh install over rhel 6.5\rhel6.4\fedora 19\fedora 20 - check clear outputs and clear start - report in any misunderstanding of the startup process ||
|-
| Upgrade from vdsm-3.3 to vdsm-3.4 after running with vdsm 3.3, same for downgrade from 3.4 to 3.3 - verify that libvirtd configured and started properly ||
|-
| Check each vdsm-tool verbs of configurator module and its outputs - for misunderstanding of the output or the help instructions please report ||
|- 
| Add more that one domain using manage-domains. Check that login , search for users and groups  is working. Check that a a user belonging to a group can login if the group has permissions.||
|- 

|}

===Storage===
{| class="wikitable" border="1"
|-
! Scenario !! Bugs
|-
| Use the General configuration as a base configuration ||
|-
| Create different types of storage domains (NFS, ISCSI, FC, local storage) with 2 or more data domains || 
|-
| Install at least 2 VMs on each of the Data Centers ||
|-
| Move the master domain to a different domain within the Data Center ||
|-
| Export one of the installed VMs, delete it, import it to another Data Center ||
|-
| Create a template from one of the VMs and then create a new VM based on this template ||
|-
| Move the newly created VM to another data domain ||
|-
| Create several snapshots from a VM (Each time change something in the guest) ||
|-
| Create several live snapshots from a VM (Each time change something in the guest) ||
|-
| Restore a previous snapshot ||
|-
| Live migrate a disk between storage domains ||
|-
| Storage Failovers ||
|-
| Host Failovers ||
|-
| Power User Portal provides power users the ability to create and manage virtual machines from the power user portal ||
|-
| High Availability scenarios provides instructions to configure virtual machine and host high availability ||
|}

===Network===
* Important Note: Known Fedora 19 bug: If the ovirtmgmt bridge is not successfully installed during initial host-setup, manually click on the host, setup networks, and add the ovirtmgmt bridge.
*Base config - single NIC, bridge on top, VMs attached to NIC
*Advanced configurations:
[[File:Vlan bonding.jpg]]
Make sure each of the configs can:
*Survive a reboot
*Test network at both host and VM level
*Ping and transfer large amounts of data (2Gb size files should be enough)
*Remain operational over time (1hr of uptime should be sufficient for the basic testing)

===Tools===
*Basic operations on iso-uploader:
# '''engine-iso-uploader list'''
# '''engine-iso-uploader upload <iso> -i <iso-domain-name> -v -f'''

* Basic operations on log-collector:
# '''engine-log-collector list'''
# '''engine-log-collector collect'''

*Basic operation on image-uploader
'''engine-image-uploader --name=<new name here> -e <domain> upload my.ovf'''

====New to v3.1:====
*port mirroring: one can setup a VM that sniffs all IP traffic between VMs on a network on a host.
*no mac spoofing: VMs cannot emit packets with spoofed mac address (unless specifically allowed to).
*Sync network: change network MTU (or other property) on host, verify that Engine may overwrite it with Sync network
*Jumbo packets: see if can be configured and used by storage

====New to v3.2:====
*Network main tab operational: you can search hosts and VM based on their network connectivity
*Guest agent reported devices: install guest agent on a VM and see it report internal information of the vNics (internal device name, IPv4 and IPv6)
*Network Linking: allow changing network the VM is connect to while it is running

===APIs===
by default we'll be using the webadmin as our API for testing
on this section we'll try to have default deployment with the different APIs
{| class="wikitable" border="1"
|-
! Scenario !! Webadmin !! UserPortal !! Rest !! Python-SDK !! CLI
|-
| Create a data-center || || || ||  ||
|-
| Create a cluster || || || || || 
|-
| Update cluster || || || || || 
|-
| Install a host || || || || ||
|-
| Create a storage domain on DC || || || || ||
|-
| Attach export/ISO domain to DC || || || || ||
|-
| Create vm || || || || ||
|-
| Delete vm || || || || ||
|- 
| Import vm || || || || ||
|- 
| Start/hibernate/resume/stop vm || || || || ||
|-
| Create a snapshot to vm || || || || ||
|-
| Create a template from vm || || || || ||
|-
| Create vm from template || || || || ||
|-
| Sign out || || || || ||
|- 
| General || || || ||  ||
|}

Python API of the above scenarios can be found in:
http://www.ovirt.org/wiki/Testing/PythonApi

===Spice===
For details about configuration check http://www.ovirt.org/wiki/Testing/Spice
{| class="wikitable" border="1"
|-
! Scenario !! Bugs
|-
|Install Windows VM and a Linux VM with Guest Tools (QXL graphic driver and spice vdagent)||
|-
| Assign user to these vms, login to a user portal, from your client machine,  and connect to it using the Spice protocol ||
|-
| Try to watch a clip via YouTube  or any other web based video (with QXL driver installed on VM) ||
|-
| Try to watch a Local movie (with QXL driver installed on VM) ||
|-
| Try to use client mouse mode and clipboard share between client and VM (with spice agent installed on VM)||
|-
| Install AutoCAD or any other graphic application a try to work with it (with QXL driver installed on VM) ||
|}

=== User Interface ===

Webadmin: 

=== Node ===


===SLA===
{| class="wikitable" border="1"
! Scenario !! Steps !! Bugs
|-
|power saving policy powering off machines||Step 1: ||
|-
|||Step 2:  YYYY ||
|-
|High Availability flag should be included when exporting/importing from Export Domain||Step 1: ||
|-
|||Step 2:  YYYY ||
|-
|Even Distribution Policy by number of VMs||Step 1: ||
|-
|||Step 2:  YYYY ||
|-
|Make reservations for HA VMs to make sure there's enough capacity to start them if N hosts fail||Step 1: have 2 hosts and 2 running VMs on one of them.||
|-
|||Step 2:  Edit cluster policy and set HA reservations to "on" ||
|-
|||Step 3:  turn off the empty host. This should trigger an alert within ~3 minutes  about HA capacity. ||
|}

====Affinity Groups====
{| class="wikitable" border="1"
|-
! Scenario !! Steps !! Bugs
|-
| affinity group CRUD commands || CRUD via webadmin || 
|-
| || CRUD via REST API || 
|-
| implicitly remove VM from affinity group || delete VM || 
|-
| || change VM cluster || 
|-
| run/migrate VM || hard enforcing, positive affinity || 
|-
|  || soft enforcing, positive affinity || 
|-
| || hard enforcing, negative affinity || 
|-
| || soft enforcing, negative affinity || 
|-
| VM in several affinity groups (transitive) || all positive - hard enforcing || 
|-
|  || all negative - hard enforcing || 
|-
|  || mixed positive negative - hard enforcing || 
|-
|  || mixed hard/soft enforcing || 
|}

==Bug Reporting==
* ovirt - https://bugzilla.redhat.com/enter_bug.cgi?product=oVirt
* Spice - https://bugs.freedesktop.org/ under Spice product
* VDSM - https://bugzilla.redhat.com/enter_bug.cgi?product=oVirt with vdsm component

Tracker bug for the release - https://bugzilla.redhat.com/1024889
